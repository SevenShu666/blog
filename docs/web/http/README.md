# HTTP知识体系

超文本传输协议，用于两点之间传输文字、图片、音频、视频等超文本数据的约定和规范。

## 一、HTTP的特点和缺点

### 特点

- 无状态：每一次请求都是独立的，请求结束不会记录连接的任何信息
- 灵活：通过http协议中`content-type`标记，可以传输任意数据类型的数据对象
- 请求-应答模式：一方发出消息，另一方接收消息做出应答

### 缺点

- 无状态：请求不会记录任何连接信息，因此如果后续的请求需要用到前面的信息，它就必须重新传输，这就可能导致传输的数据量增大
- 明文传输：报文（header部分）使用的是明文，直接将信息暴露给外界，给攻击者带来便利
- 队头阻塞：当http开始长连接时，共用一个tcp连接，当某个请求耗时过长时，就会阻塞其他请求，造成队头阻塞

## 二、HTTP报文的组成

### HTTP报文

请求报文和响应报文

**请求报文**：请求行、请求头、空行、请求体

- 请求行：包含http方法，请求地址，http协议以及版本
- 请求头：一些key：value，告诉服务端需要哪些资源以及类型
- 空行：用于区分头部和实体，告诉服务端怎么解析
- 请求体：请求的参数

**响应报文**：状态行、响应头、空行、响应体

- 状态行：包含http协议以及版本，数字状态码，状态码英文名称
- 响应头：一些key：value，告诉服务端需要哪些资源以及类型
- 空行：用于区分头部和实体，告诉服务端怎么解析
- 响应体：服务端返回的数据

### 三、HTTP的请求方法

### HTTP1.0

`GET`、`POST`、`HEAD`

### HTTP1.1

`PUT`、`PATCH`、`DELETE`、`OPTIONS`、`POST`、`CONNECT`

| 方法    | 描述                                       |
| ------- | ------------------------------------------ |
| GET     | 获取资源                                   |
| POST    | 传输资源，通常会造成服务器资源的修改       |
| HEAD    | 获得报文首部                               |
| PUT     | 更新资源                                   |
| PATCH   | 对PUT的补充，对已知资源部分更新            |
| DELETE  | 删除资源                                   |
| OPTIONS | 列出请求资源支持的请求方法，用来跨域请求   |
| TRACE   | 追踪请求/响应路径，用于测试或诊断          |
| CONNECT | 将连接改为管道方式用于代理服务器(隧道代理) |

### GET和POST的区别

- GET请求参数会被浏览器历史记录保存，而POST请求参数不会被保留
- GET请求参数是拼接在url上，POST请求的参数在请求体里
- 浏览器对url的长度有限制，因此GET请求的参数大小会被限制，POST请求参数基本上没有限制
- GET请求的参数直接暴露在URL上，相对POST来说更不安全

## 四、常见HTTP状态码

| 状态码 | 描述                                                         |
| ------ | ------------------------------------------------------------ |
| 200    | 请求成功                                                     |
| 206    | 已完成指定范围的请求(带Range头的GET请求),场景如video,audio播放文件较大,文件分片时 |
| 301    | 永久重定向                                                   |
| 302    | 临时重定向                                                   |
| 304    | 请求资源未修改，可以使用缓存的资源，不用在服务器取           |
| 400    | 请求有语法错误                                               |
| 401    | 没有权限访问                                                 |
| 403    | 服务器拒绝执行请求，场景如不允许直接访问，只能通过服务器访问时 |
| 404    | 请求资源不存在                                               |
| 500    | 服务器内部错误，无法完成请求                                 |
| 503    | 请求未完成，因服务器过载、宕机或维护等                       |

